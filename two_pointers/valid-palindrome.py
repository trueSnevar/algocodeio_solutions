"""
Правильный палиндром

средне
решено

Дана строка s. Верните True, если s является палиндромом, или False в противном случае.
Фраза является палиндромом, если, после преобразования всех заглавных букв в строчные
и удаления всех символов, кроме букв и цифр, она читается одинаково слева направо и справа налево.

Буквенно-цифровые символы включают латинские буквы и цифры.

Пример 1:

Ввод: s = "A man, a plan, a canal: Panama"
Вывод: True
Объяснение: после фильтрации получается "amanaplanacanalpanama", что является палиндромом.

Пример 2:

Ввод: s = "AbaCdaba"
Вывод: False
Объяснение: после преобразования нижний регистр и фильтрации получается "abacdaba", что не палиндром.

Ограничения:
- len(s) ≥ 1
"""
from typing import *


def is_palindrome(s: str) -> bool:
    """
    Проверяет, является ли строка s палиндромом после приведения к нижнему регистру
    и удаления всех символов, кроме букв и цифр.
    """
    left, right = 0, len(s) - 1
    while left < right:
        # пропускаем неалфанумерические слева
        while left < right and not s[left].isalnum():
            left += 1
        # и справа
        while left < right and not s[right].isalnum():
            right -= 1
        if s[left].lower() != s[right].lower():
            return False
        left += 1
        right -= 1
    return True


if __name__ == "__main__":
    # Пример 1
    print(is_palindrome("A man, a plan, a canal: Panama"))  # True
    # Пример 2
    print(is_palindrome("AbaCdaba"))                      # False

# Оценка сложности:
# Время: O(n), где n = len(s), один проход двумя указателями
# Память: O(1), дополнительная память постоянная
